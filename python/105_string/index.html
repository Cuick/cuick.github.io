<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <title>
    python基础-字符串和编码 // K&#39;s blog!
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<meta name="generator" content="Hugo 0.16-DEV" />

  <meta property="og:title" content="python基础-字符串和编码" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="http://cuick.github.io/python/105_string/" />


  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/base-min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
  
  
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-min.css">
  
  

  <link rel="stylesheet" href="http://cuick.github.io/css/redlounge.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='//fonts.googleapis.com/css?family=Raleway:400,200,100,700,300,500,600,800' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="K&#39;s blog!" />

    
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/tomorrow-night-bright.min.css">
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


  

  

  
</head>

<body>
	

	<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    

	

    <h1 class="brand-title">崔程凯</h1>
    <h2 class="brand-tagline">Do not cut down the tree that gives you shade.</h2>

    <nav class="nav">
      <ul class="nav-list">
        <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://cuick.github.io">Home</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/django">Django</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/markdown">Markdown</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/hugo">hugo</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/linux">linux</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/python">python</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/redis">redis</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/twisted">twisted</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/vim">vim</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/windows">windows</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/zsh">zsh</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/notes">随笔</a></li>
        
      </ul>
    </nav>

    
    <div class="social-buttons">
      
        
        <a href="http://weibo.com/zxzxck/" target="_blank"><i class='fa fa-weibo'></i></a>
        
      
        
        <a href="http://github.com/cuick" target="_blank"><i class='fa fa-github'></i></a>
        
      
        
        <a href="http://blog.csdn.net/cuick2013" target="_blank"><i class='fa fa-link'></i></a>
        
      
      
    </div>
    

  </div>
</div>

	
	

    <div class="content pure-u-1 pure-u-md-3-4">
		<a name="top"></a>
		

		
			
		    <div id="toc" class="pure-u-1 pure-u-md-1-4">
				<small class="toc-label">Contents</small>
		   	 	<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#字符串:a23880f8b35e46659c516e699a542eed">字符串</a></li>
<li><a href="#编码:a23880f8b35e46659c516e699a542eed">编码</a>
<ul>
<li>
<ul>
<li><a href="#ascii-unicode和utf-8的关系:a23880f8b35e46659c516e699a542eed">ASCII、Unicode和UTF-8的关系</a></li>
<li><a href="#计算机系统通用的字符编码工作方式:a23880f8b35e46659c516e699a542eed">计算机系统通用的字符编码工作方式</a></li>
</ul></li>
</ul></li>
<li><a href="#python字符串-python2-7:a23880f8b35e46659c516e699a542eed">python字符串(python2.7)</a></li>
<li><a href="#格式化:a23880f8b35e46659c516e699a542eed">格式化</a></li>
</ul></li>
</ul>
</nav>
		    </div>
		    
	    
  		<section class="post">
            <h1 class="post-title">
              <a href="/python/105_string/">python基础-字符串和编码</a>
            </h1>
            <h3 class="post-subtitle">
            	
            </h3>
            
            	<span class="post-date">
                	<span class="post-date-day"><sup>7</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Apr</span> <span class="post-date-year">2016</span>
            	</span>
            	
            
            	
            

			
			
				<div class="post-categories">
				
					<a class="post-category post-category-python" href="http://cuick.github.io/categories/python">python</a>
				
				</div>
			

			

			

            

<h2 id="字符串:a23880f8b35e46659c516e699a542eed">字符串</h2>

<ol>
<li>字符串是以单引号<code>'</code>或双引号<code>&quot;</code>括起来的任意文本，比如<code>'abc'</code>，<code>&quot;xyz&quot;</code></li>

<li><p>如果字符串内部既包含<code>'</code>又包含<code>&quot;</code>怎么办？可以用转义字符\来标识</p>

<pre><code>'I\'m \&quot;OK\&quot;!'
</code></pre>

<p>表示的内容：</p>

<pre><code>I'm &quot;OK&quot;!
</code></pre></li>

<li><p>转义字符\可以转义很多字符，比如<code>\n</code>表示换行，<code>\t</code>表示制表符，字符\本身也要转义，所以<code>\\</code>表示的字符就是\，</p>

<pre><code>&gt;&gt;&gt; print('\\\t\\')
\       \
&gt;&gt;&gt; print(r'\\\t\\')
\\\t\\
</code></pre></li>

<li><p>如果字符串内部有很多换行，用\n写在一行里不好阅读，为了简化，Python允许用<code>'''...'''</code>的格式表示多行内容</p></li>

<li><p>多行字符串<code>'''...'''</code>还可以在前面加上r使用</p></li>
</ol>

<h2 id="编码:a23880f8b35e46659c516e699a542eed">编码</h2>

<h4 id="ascii-unicode和utf-8的关系:a23880f8b35e46659c516e699a542eed">ASCII、Unicode和UTF-8的关系</h4>

<ol>
<li>最早只有127个字母被编码到计算机里，也就是大小写英文字母、数字和一些符号，这个编码表被称为ASCII编码，比如大写字母A的编码是65，小写字母z的编码是122。</li>
<li>处理中文显然一个字节是不够的，至少需要两个字节，而且还不能和ASCII编码冲突，所以，中国制定了GB2312编码，用来把中文编进去,日本把日文编到Shift_JIS里，韩国把韩文编到Euc-kr里,
各国有各国的标准，就会不可避免地出现冲突，结果就是，在多语言混合的文本中，显示出来会有乱码。</li>
<li>Unicode应运而生。Unicode把所有语言都统一到一套编码里，这样就不会再有乱码问题了。</li>

<li><p>ASCII编码和Unicode编码的区别：ASCII编码是1个字节，而Unicode编码通常是2个字节。
字母A用ASCII编码是十进制的65，二进制的01000001；</p>

<p>字符0用ASCII编码是十进制的48，二进制的00110000，注意字符&rsquo;0&rsquo;和整数0是不同的；</p>

<p>汉字中已经超出了ASCII编码的范围，用Unicode编码是十进制的20013，二进制的01001110 00101101。</p></li>

<li><p>如果统一成Unicode编码，乱码问题从此消失了。但是，如果你写的文本基本上全部是英文的话，用Unicode编码比ASCII编码需要多一倍的存储空间，在存储和传输上就十分不划算。</p></li>

<li><p>Unicode编码转化为“可变长编码”的UTF-8编码。
UTF-8编码把一个Unicode字符根据不同的数字大小编码成1-6个字节，常用的英文字母被编码成1个字节，汉字通常是3个字节，只有很生僻的字符才会被编码成4-6个字节。
如果你要传输的文本包含大量英文字符，用UTF-8编码就能节省空间</p></li>

<li><p>UTF-8编码有一个额外的好处，就是ASCII编码实际上可以被看成是UTF-8编码的一部分，所以，大量只支持ASCII编码的历史遗留软件可以在UTF-8编码下继续工作。</p></li>
</ol>

<h4 id="计算机系统通用的字符编码工作方式:a23880f8b35e46659c516e699a542eed">计算机系统通用的字符编码工作方式</h4>

<ol>
<li>在计算机内存中，统一使用Unicode编码，当需要保存到硬盘或者需要传输的时候，就转换为UTF-8编码。</li>
<li>用记事本编辑的时候，从文件读取的UTF-8字符被转换为Unicode字符到内存里，编辑完成后，保存的时候再把Unicode转换为UTF-8保存到文件</li>
<li>浏览网页的时候，服务器会把动态生成的Unicode内容转换为UTF-8再传输到浏览器</li>
</ol>

<h2 id="python字符串-python2-7:a23880f8b35e46659c516e699a542eed">python字符串(python2.7)</h2>

<ol>
<li>Python只支持ASCII编码</li>

<li><p>Python在后来添加了对Unicode的支持，以Unicode表示的字符串用u&rsquo;&hellip;&lsquo;表示</p>

<pre><code>&gt;&gt;&gt; print u'中文'
中文
&gt;&gt;&gt; u'中'
u'\u4e2d
</code></pre></li>

<li><p>字符串&rsquo;xxx&rsquo;虽然是ASCII编码，但也可以看成是UTF-8编码，而u&rsquo;xxx&rsquo;则只能是Unicode编码。</p></li>

<li><p>把u&rsquo;xxx&rsquo;转换为UTF-8编码的&rsquo;xxx&rsquo;用encode(&lsquo;utf-8&rsquo;)方法</p>

<pre><code>&gt;&gt;&gt; u'ABC'.encode('utf-8')
'ABC'
&gt;&gt;&gt; u'中文'.encode('utf-8')
'\xe4\xb8\xad\xe6\x96\x87'
</code></pre>

<p>由unicode转化为指定的编码用encode。由指定编码 解码为 unicode 用decode</p></li>

<li><p>英文字符转换后表示的UTF-8的值和Unicode值相等（但占用的存储空间不同），而中文字符转换后1个Unicode字符将变为3个UTF-8字符，\xe4就是其中一个字节，因为它的值是228，没有对应的字母可以显示，所以以十六进制显示字节的数值。len()函数可以返回字符串的长度</p></li>

<li><p>由于Python源代码也是一个文本文件，所以，当你的源代码中包含中文的时候，在保存源代码时，就需要务必指定保存为UTF-8编码。当Python解释器读取源代码时，为了让它按UTF-8编码读取，我们通常在文件开头写上这两行</p>

<pre><code>#!/usr/bin/env python
# -*- coding: utf-8 -*-
</code></pre>

<p>第一行注释是为了告诉Linux/OS X系统，这是一个Python可执行程序，Windows系统会忽略这个注释；</p>

<p>第二行注释是为了告诉Python解释器，按照UTF-8编码读取源代码，否则，你在源代码中写的中文输出可能会有乱码。</p></li>

<li><p>python3字符串是以Unicode编码的</p></li>
</ol>

<h2 id="格式化:a23880f8b35e46659c516e699a542eed">格式化</h2>

<ol>
<li>采用的格式化方式和C语言是一致的，用%实现</li>
<li>有几个%?占位符，后面就跟几个变量或者值，顺序要对应好。如果只有一个%?，括号可以省略。</li>

<li><p>常见的占位符有：</p>

<p>%d  整数
%f  浮点数
%s  字符串
%x  十六进制整数</p></li>

<li><p>格式化整数和浮点数还可以指定是否补0和整数与小数的位数</p>

<pre><code>&gt;&gt;&gt; '%2d-%02d' % (3, 1)
' 3-01'
&gt;&gt;&gt; '%.2f' % 3.1415926
'3.14'
</code></pre></li>

<li><p>如果你不太确定应该用什么，%s永远起作用，它会把任何数据类型转换为字符串</p></li>

<li><p>对于Unicode字符串，用法完全一样，但最好确保替换的字符串也是Unicode字符串</p>

<pre><code>&gt;&gt;&gt; u'Hi, %s' % u'Michael'
u'Hi, Michael'
</code></pre></li>

<li><p>字符串里面的%是一个普通字符的时候就需要转义，用%%来表示一个%</p>

<pre><code>&gt;&gt;&gt; 'growth rate: %d %%' % 7
'growth rate: 7 %'
</code></pre></li>

<li><p>Python当然也支持其他编码方式，比如把Unicode编码成GB2312</p>

<pre><code>&gt;&gt;&gt; u'中文'.encode('gb2312')
'\xd6\xd0\xce\xc4'
</code></pre>

<p>如果没有特殊业务要求，请牢记仅使用Unicode和UTF-8这两种编码方式</p></li>

<li><p>在Python 3.x版本中，把&rsquo;xxx&rsquo;和u&rsquo;xxx&rsquo;统一成Unicode编码，即写不写前缀u都是一样的</p>

<p>由于Python3.x的字符串类型是str，在内存中以Unicode表示，一个字符对应若干个字节。如果要在网络上传输，或者保存到磁盘上，就需要把str变为以字节为单位的bytes。</p>

<p>Python3.x对bytes类型的数据用带b前缀的单引号或双引号表示：b&rsquo;xxx&rsquo;</p></li>
</ol>

	
			

			
				<div class="tags-list">
					<span class="dark-red">Tags</span><span class="decorative-marker">//</span>
					
	                <a class="post-tag post-tag-python" href="http://cuick.github.io/tags/python">python</a>,
	                
	                <a class="post-tag post-tag-string" href="http://cuick.github.io/tags/string">string</a>,
	                
				</div>
			

			
				<div class="paging">
					<span class="paging-label">More Reading</span>
					
					<div class="paging-newer">
						<span class="dark-red">Newer</span><span class="decorative-marker">//</span>
						<a class="paging-link" href="/python/106_list_tuple_set/">python基础-list tuple set</a>
		            </div>
		            

					
					<div class="paging-older">
						<span class="dark-red">Older</span><span class="decorative-marker">//</span>
			            <a class="paging-link" href="/vim/102/">my vimrc</a>
		            </div>
		            
	            </div>
            
          </section>
          
          	<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'kooooook';
    var disqus_identifier = 'http:\/\/cuick.github.io\/python\/105_string\/';
    var disqus_title = 'python基础-字符串和编码';
    var disqus_url = 'http:\/\/cuick.github.io\/python\/105_string\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          
        
      <div class="footer">
	<hr class="thin" />
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
		<ul class="footer-menu">
		
			<li><a href="/footer">Powered by Hugo with hugo-redlounge</a></li>
		
		</ul>
	</div>

	<p>&copy; 2016. All rights reserved.</p>
</div>
    </div>
  </div>
	

	

  
</body>
</html>
