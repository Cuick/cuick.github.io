<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <title>
    Vim // 
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<meta name="generator" content="Hugo 0.16-DEV" />

  <meta property="og:title" content="Vim" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="http://cuick.github.io/tags/vim/" />


  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/base-min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
  
  
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-min.css">
  
  

  <link rel="stylesheet" href="http://cuick.github.io/css/redlounge.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='//fonts.googleapis.com/css?family=Raleway:400,200,100,700,300,500,600,800' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="http://cuick.github.io/tags/vim/index.xml" rel="alternate" type="application/rss+xml" title="" />

    
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/tomorrow-night-bright.min.css">
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


  

  

  
</head>

<body>
	<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    

	

    <h1 class="brand-title">崔程凯</h1>
    <h2 class="brand-tagline">Do not cut down the tree that gives you shade.</h2>

    <nav class="nav">
      <ul class="nav-list">
        <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://cuick.github.io">Home</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/menu">MENU</a></li>
        
      </ul>
    </nav>

    
    <div class="social-buttons">
      
        
        <a href="http://blog.csdn.net/cuick2013" target="_blank"><i class='fa fa-twitter'></i></a>
        
      
      
    </div>
    

  </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
      <a name="top"></a>
      

      <div class="posts">
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/twisted/spf13-vim-3-0-release-and-new-website/">Twisted学习笔记</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>27</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Feb</span> <span class="post-date-year">2016</span>
		          </span>
      				
      				
      					
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-development" href="http://cuick.github.io/categories/development">Development</a>
      					
					        <a class="post-category post-category-vim" href="http://cuick.github.io/categories/vim">VIM</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	网络编程 socket select poll epoll greenlet gevent gevent是基于协程的高性能Python网络库，相比Twisted、Stackless等，gevent使用libev事件循环，因此速度很快、性能很好，使用greenlet提供高层的同步API，因此非常轻量。 http://www.elias.cn/Python/PyConcurrency http://blog.csdn.net/yueguanghaidao/ Twisted twisted特点： 在一个回调函数执行过程中，实际上Twisted的循环是被有效地阻塞在我们的代码上的。因此，因此我们应该确保回调函数不要浪费时间（尽快返回）。 很多标准的Python方法没有办法转换为非阻塞方式。例如，os.system中的很多方法会在子进程完成前一直处于阻塞状态。这也就是它工作的方式。所以当你使用Twisted时，避开使用os.system。 我们为Twisted程序写的API必须是异步的 不能将同步与异步代码混合起来使用 我们可以在自己的代码中写回调函数，正如Twisted做的那样 并且，我们需要写处理错误信息的回调函数 Reactor 一个真正reactor模式的实现是需要实现循环独立抽象出来并具有如下的功能： 监视一系列与你I/O操作相关的文件描述符（description) 不停地向你汇报那些准备好I/O操作的文件描述符 一个设计优秀的reactor模式实现需要做到： 处理所有不同系统会出现的I/O事件 提供优雅的抽象来帮助你在使用reactor时少花些心思去考虑它的存在 提供你可以在抽象层外（treactor实现）使用的公共协议实现。 reactor特性 Twisted的reactor只有通过调用reactor.run()来启动。 reactor循环是在其开始的进程中运行，也就是运行在主进程中。 一旦启动，就会一直运行下去。reactor就会在程序的控制下（或者具体在一个启动它的线程的控制下）。 reactor循环并不会消耗任何CPU的资源。 并不需要显式的创建reactor，只需要引入就OK了。 使用twisted.internet.pollreactor中的系统调用来poll 来代替select方法 from twited.internet import pollreactor pollreactor.install() from twisted.internet import reactor reactor.run() Transports 一个Twisted的Transport代表一个可以收发字节的单条连接。对于我们的诗歌下载客户端而言，就是对一条TCP连接的抽象。 ransport抽象可以代表任何这样的连接并为其代表的连接处理具体的异步I/O操作细节。 Protocols 一个具体的Twisted的Protocol的实现应该对应一个具体网络协议的实现，像FTP、IMAP或其它我们自己规定的协议。 每一个Twisted的Protocols类实例都为一个具体的连接提供协议解析。 Protocol实例是存储协议状态与间断性接收并累积数据的地方（由于我们是通过异步I/O方式以任意大小来接收数据的）。 Protocol实例如何得知它为哪条连接服务呢？如果你阅读IProtocol定义会发现一个makeConnection函数。这是一个回调函数，Twisted会在调用它时传递给其一个也是仅有的一个参数，即就是Transport实例。这个Transport实例就代表Protocol将要使用的连接。 Protocol Factories 每个连接需要一个自己的Portocol Protocol Factories一个新的连接制定一个合适的协议 Protocol Factory就是Factory模式的一个具体实现。 buildProtocol方法在每次被调用时返回一个新Protocol实例。它就是Twisted用来为新连接创建新Protocol实例的方法。 Failure 如果有异常出现的话，其能捕获Exception与跟踪栈。 将一个Failure对象付给回调函数，我们就可以为以后的调试保存跟踪栈的信息了。 关于回调 激活errback是非常重要的。由于errback的功能与except块相同，因此用户需要确保它们的存在。他们并不可选项，而是必选项。 不在错误的时间点激活回调与在正确的时间点激活回调同等重要。典型的用法是，callback与errback是互斥的即只能运行其中一个。 使用回调函数的代码重构起来有些困难。 Deferred-以让程序员在使用回调时更简便 我们不能忽视errback，在任何异步编程的API中都需要它。Deferred支持errbacks。 激活回调多次可能会导致很严重的问题。Deferred只能被激活一次，这就类似于同步编程中的try/except的处理方法。
            </article>
			<div class="read-more-link">
				<a href="/twisted/spf13-vim-3-0-release-and-new-website/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/menu/101/">MENU</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>1</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jan</span> <span class="post-date-year">1970</span>
		          </span>
      				
      				
      					
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-erlang" href="http://cuick.github.io/categories/erlang">ERLANG</a>
      					
					        <a class="post-category post-category-python" href="http://cuick.github.io/categories/python">PYTHON</a>
      					
					        <a class="post-category post-category-go" href="http://cuick.github.io/categories/go">GO</a>
      					
					        <a class="post-category post-category-linux" href="http://cuick.github.io/categories/linux">LINUX</a>
      					
					        <a class="post-category post-category-rust" href="http://cuick.github.io/categories/rust">RUST</a>
      					
					        <a class="post-category post-category-vim" href="http://cuick.github.io/categories/vim">VIM</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	点击上面的标签，打开相关文章列表
            </article>
			<div class="read-more-link">
				<a href="/menu/101/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
      </div>

      <div class="footer">
	<hr class="thin" />
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
		<ul class="footer-menu">
		
		</ul>
	</div>

	<p>&copy; 2016. All rights reserved.</p>
</div>
    </div>
  </div>
  
</body>
</html>
